防止娃娃机空闲时有多个用户点击开始游戏:
  用户点击开始游戏调用API: 
    程序一开始先检查下redis这个key是否存在 存在说明已经有一个用户在进行开始游戏的动作 直接返回失败
    如果不存在就调用redis 这个key存储true 并且将redis 这个key设置过期时间5s
  开始游戏API执行成功: 需要调用node接口通知房间已经有人在开始游戏

投币成功娃娃机接入方会立即发起回调请求: 
  投币结果更新到数据库 
  绑定第三方游戏记录id

游戏结束娃娃机接入方会立即发起回调请求: 
  游戏结果更新到数据库
  调用node接口通知该房间用户游戏结果

定时监控小程序: 
  监控娃娃机状态是否异常:
    1: 娃娃机缓存信息中最近一次开始游戏时间不为空
    2: 娃娃机状态是游戏中或游戏结束等待投币
    3: 当前时间-娃娃机的最近一次开始游戏时间>=50s 
    3个条件满足: 
      将娃娃机状态修改成空闲中
      调用第三方查询接口查询这次游戏记录的抓取结果，如果有结果，更新抓取结果
      调用node接口通知该房间用户游戏结果
  监控直播精灵心跳API是否正常调用:
    如果最近一次心跳缓存key不存在 将娃娃机直播间roomSource修改成1
    调用node接口通知该房间用户娃娃机直播间出现异常

API:
  提前生成15个可用的直播间 100000001-100000015 
  在直播精灵开播时候输入娃娃机id
  心跳API 更新娃娃机状态
  不想再抓更新缓存娃娃机状态到空闲中
  客户端收到socket返回游戏结果 调用API 更新缓存娃娃机状态到游戏结束等待投币

管理后台:
  房间管理:
    同步: 将娃娃机id列表同步到数据库娃娃机表
    查看房间列表
    绑定商品
    修改房间信息
  商品管理:
    查看商品列表
    创建商品
    修改商品
  发货管理:
    待发货列表
    已发货列表
    发货

涉及工程: 
  API: meshow third
  模块: kk-doll-server
  小程序: kk-doll-project
  disconf: kk-doll-server

数据库DBA: 
  conf_inout_ntype: 新增一个夹娃娃游戏流水类型
  hist_inventory_income: 新增一个库存来源 14-抓娃娃兑换
  catch_doll_record: 上线时id序列号要从100000开始 防止和测试库的id重复
  
抓娃娃第三方app_id:
  正式: f477225b-5db0-488c-bbce-e15c7101eb6f
  回调地址: http://api.kktv1.com:8080/meShow/external/catchDollCallback

  beta: 78b9a2c9-9969-4d86-9223-a2ab1186b789
  回调地址: http://betaapi.kktv8.com:9090/third/external/catchDollCallback
  
  测试: 2c2ab480-757b-41d5-8200-4dc69c8d9ab4 
  回调地址: http://122.224.137.163:9090/third/external/catchDollCallback

线上直播间id:
  16864265 大头小恐龙
  16864295 围巾兔
  16864098 玻尿酸鸭
  16864214 和服凯蒂猫
  16864079 鬼怪玩偶
  16864311 小黄人
  16864019 星座娃娃
  16864194 小僵尸

正式服获取娃娃机栏目列表接口: http://api.kktv1.com:8080/meShow/entrance?parameter={%22FuncTag%22:20010302,%22cataId%22:1076,%22platform%22:1,%22start%22:0,%22offset%22:10,%22a%22:1,%22c%22:2}